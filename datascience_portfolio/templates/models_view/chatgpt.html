


{% extends "base.html" %}
{% load static %}
<script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" type="module" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
   
</script>
<script type="module">
    import Autogrow from "https://cdn.jsdelivr.net/npm/vanilla-autogrow@1.0.0/autogrow.min.js";
    var inst = new Autogrow();
  </script>
{% block content %}
<style>
    .overlay {
       background-color:#EFEFEF;
       position: fixed;
       width: 100%;
       height: 100%;
       z-index: 1000;
       top: 0px;
       left: 0px;
       opacity: .5; /* in FireFox */ 
       filter: alpha(opacity=50); /* in IE */
   }
 </style>

<div id="layoutSidenav_content">
   <main>
      <div class="container-fluid px-4">
         <h1 class="mt-4">
            ChatpGPT
         </h1>
         <ol class="breadcrumb mb-4">
            <li class="breadcrumb-item"><a href="/">Dashboard</a></li>
            <li class="breadcrumb-item active"> ChatpGPT</li>
         </ol>
         <div id="error_div" class="alert alert-primary" style="display:none;" role="alert">
            Please enter the text below.
         </div>
  
         <div class="card mb-4">
            <form name="form1" onsubmit="return Spinner()" action="{% url 'chat_gpt' %}", method="POST">
                {% csrf_token %}
            <div class="card-body">
               <p class="mb-0">
                <label for="exampleFormControlTextarea1" class="form-label">Enter the text below.
                </label>
                <input type="text" class="form-control" name="message">
                    <br>
                <button type="submit" class="formbtn">Submit</button>

            </div>
        </form>

         </div>

        <br><br>
        {% if response %}
         <div class="row">
            <div class="col-lg-12">
                <div class="card mb-4">
                    <div class="card-header">
                        <i class="fas fa-chart-bar me-1"></i>
                        Response
                    </div>
                    <div class="card-body">{{response}}</canvas></div>
                    <div class="card-footer small text-muted"></div>
                </div>
            </div>
            
        </div>
      </div>
      {% endif %}
   </main>
</div>

<script> 
  function Spinner()
 {
 var empt = document.forms["form1"]["message"].value;
 if (empt == "")
 {
 $("#error_div").show();
 
 return false;
 }
 else 
 {
 $("#spinner_div").show();
 var div= document.createElement("div");
    div.className += "overlay";
    document.body.appendChild(div);
 return true; 
 }
 }
 </script>  

 
{% endblock %}

